<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>PetIBM: 2D examples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PetIBM
   &#160;<span id="projectnumber">0.5</span>
   </div>
   <div id="projectbrief">Toolbox and applications of the immersed-boundary method for distributed-memory architectures</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="md_CHANGELOG.html"><span>Change&#160;Log</span></a></li>
      <li><a href="md_CONTRIBUTING.html"><span>Contributing</span></a></li>
      <li><a href="usergroup0.html"><span>Quick&#160;Start</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_doc_markdowns_examples2d.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">2D examples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>2D lid-driven cavity flow at Re=100</h2>
<p>Input files are located in the folder <code>examples/navierstokes/liddrivencavity2dRe100</code> of the PetIBM directory.</p>
<p>Make sure that the PetIBM executables are available in your PATH environment variable. To add the PetIBM installation directory to you PATH: </p><pre class="fragment">export PATH=&lt;petibm-installation-directory&gt;:$PATH
</pre><p>We are going to solve the flow in a 2D square cavity of unit length with the top wall moving in the positive x direction at speed 1. The Reynolds number (based on the kinematic viscosity, the length of the cavity, and the speed of the moving wall) is 100. The fluid is initially at rest and the top wall impulsively starts moving.</p>
<p>The computational domain [0, 1]x[0, 1] is uniformly discretized with 32 cells in each direction.</p>
<p>We will run 1000 time steps with a time increment of 0.01 and save the numerical solution at the end.</p>
<p>To run this example: </p><pre class="fragment">cd &lt;simulation-directory&gt;
petibm-navierstokes
</pre><p>The simulation should completes within few seconds.</p>
<p>The numerical solution is saved in the sub-folder <code>solution</code>.</p>
<p>We provide a Python script to visualize the velocity components along the centerlines and compare with the numerical results from Ghia et al. (1982). To run the script: </p><pre class="fragment">python scripts/plotCenterlineVelocities.py
</pre><p>The plot will be saved as a PNG file in the folder <code>figures</code> of the simulation directory.</p>
<p>Here is what we obtained:</p>
<div class="image">
<img src="liddrivencavity2dRe100_velocitycenterlines.png" alt="liddrivencavity2dRe100_velocitycenterlines.png"/>
<div class="caption">
liddrivencavity2dRe100_velocitycenterlines</div></div>
<p> You can also run the utility <code>petibm-vorticity</code> to compute and write the 2D vorticity field at saved time steps: </p><pre class="fragment">petibm-vorticity
</pre><p>The field <code>wz</code> will be written in the time-step HDF5 files; the grid for the vorticity is also written in the file <code>grid.h5</code> under the group <code>wz</code>.</p>
<p>Next, you can create XDMF files for the field variables with the utility </p><pre class="fragment">petibm-createxdmf
</pre><p>It will create XDMF files for the pressure (<code>p.xmf</code>), the velocity components (<code>u.xmf</code> and <code>v.xmf</code>), and the vorticity (<code>wz.xmf</code>). These files can be open with VisIt to read, visualize, and process the field solutions.</p>
<h2>2D flow over a circular cylinder at Re=40</h2>
<p>Input files are located in the folder <code>examples/ibpm/cylinder2dRe40</code> of the PetIBM directory.</p>
<p>Make sure that the PetIBM executables are available in your PATH environment variable. To add the PetIBM installation directory to you PATH: </p><pre class="fragment">export PATH=&lt;petibm-installation-directory&gt;:$PATH
</pre><p>A circular cylinder of diameter 1.0 is placed at the center of a two-dimensional domain spanning [-15,15]x[-15,15]. The initial velocity of the fluid in the domain is (1, 0). Dirichlet conditions for the velocity are set on all boundaries (velocity set to (1, 0)), except at the outlet where the fluid is convected outside the domain in the x-direction at speed 1.0. The Reynolds number (based on the freestream speed, the diameter of the circular cylinder, and the kinematic viscosity) is 40.</p>
<p>The computational domain is discretized using an stretched Cartesian grid with 186x186 cells. The mesh is kept uniform in the sub-domain [-0.6, 0.6]x[-0.6, 0.6] and stretched to the external boundaries with a constant ratio of 1.05.</p>
<p>For this example, we will run the simulation with the immersed-boundary projection method (Taira and Colonius, 2007) for 2000 time steps with a time increment of 0.01 and save the numerical solution at the end.</p>
<p>To run the example using 2 MPI processes: </p><pre class="fragment">cd &lt;simulation-directory&gt;
mpiexec -np 2 petibm-ibpm
</pre><p>The run should complete in less than 5 minutes and the numerical solution is saved in the folder <code>solution</code>.</p>
<p>We provide a Python script (located under the folder <code>scripts</code> in the simulation directory) to plot the instantaneous drag coefficient and compare it with the numerical results from Koumoutsakos and Leonard (1995). To run the script: </p><pre class="fragment">python scripts/plotDragCoefficient.py
</pre><p>You can also run the utility <code>petibm-vorticity</code> to compute and write the 2D vorticity field at saved time steps: </p><pre class="fragment">petibm-vorticity
</pre><p>The field <code>wz</code> will be written in the time-step HDF5 files; the grid for the vorticity is also written in the file <code>grid.h5</code> under the group <code>wz</code>.</p>
<p>We also provide a Python script to plot the vorticity field and save it in the folder <code>figures</code> in the simulation directory: </p><pre class="fragment">python scripts/plotVorticity.py
</pre><p>Here is what we obtained:</p>
<div class="image">
<img src="cylinder2dRe40_dragcoefficient.png" alt="cylinder2dRe40_dragcoefficient.png"/>
<div class="caption">
cylinder2dRe40_dragcoefficient</div></div>
<div class="image">
<img src="cylinder2dRe40_vorticity.png" alt="cylinder2dRe40_vorticity.png"/>
<div class="caption">
cylinder2dRe40_vorticity</div></div>
<p> Next, you can create XDMF files for the field variables with the utility </p><pre class="fragment">petibm-createxdmf
</pre><p>It will create XDMF files for the pressure (<code>p.xmf</code>), the velocity components (<code>u.xmf</code> and <code>v.xmf</code>), and the vorticity (<code>wz.xmf</code>). These files can be open with VisIt to read, visualize, and process the field solutions.</p>
<h2>2D flow over a circular cylinder at Re=550 (using AmgX)</h2>
<p>Input files are located in the folder <code>examples/ibpm/cylinder2dRe550_GPU</code> of the PetIBM directory.</p>
<p>Make sure that the PetIBM executables are available in your PATH environment variable. To add the PetIBM installation directory to you PATH: </p><pre class="fragment">export PATH=&lt;petibm-installation-directory&gt;:$PATH
</pre><p>A circular cylinder of diameter 1.0 is placed at the center of a two-dimensional domain spanning [-15,15]x[-15,15]. The initial velocity of the fluid in the domain is (1, 0). Dirichlet conditions for the velocity are set on all boundaries (velocity set to (1, 0)), except at the outlet where the fluid is convected outside the domain in the x-direction at speed 1.0. The Reynolds number (based on the freestream speed, the diameter of the circular cylinder, and the kinematic viscosity) is 550.</p>
<p>The computational domain is discretized using an stretched Cartesian grid with 450x450 cells. The mesh is kept uniform in the sub-domain [-0.54, 0.54]x[-0.54, 0.54] and stretched to the external boundaries with a constant ratio of 1.02.</p>
<p>For this example, we will run the simulation with the immersed-boundary projection method (Taira and Colonius, 2007) for 1200 time steps with a time increment of 0.0025 and save the numerical solution at the end.</p>
<p>To run the example using 2 MPI processes and 1 CUDA-capable GPU device: </p><pre class="fragment">cd &lt;simulation-directory&gt;
export CUDA_VISIBLE_DEVICES=0
mpiexec -np 2 petibm-ibpm
</pre><p>The run should complete in less than 5 minutes (with a NVIDIA K40 GPU device) and the numerical solution is saved in the folder <code>solution</code>.</p>
<p>We provide a Python script (located under the folder <code>scripts</code> in the simulation directory) to plot the instantaneous drag coefficient and compare it with the numerical results from Koumoutsakos and Leonard (1995). To run the script: </p><pre class="fragment">python scripts/plotDragCoefficient.py
</pre><p>You can also run the utility <code>petibm-vorticity</code> to compute and write the 2D vorticity field at saved time steps: </p><pre class="fragment">petibm-vorticity
</pre><p>The field <code>wz</code> will be written in the time-step HDF5 files; the grid for the vorticity is also written in the file <code>grid.h5</code> under the group <code>wz</code>.</p>
<p>We also provide a Python script to plot the vorticity field and save it in the folder <code>figures</code> in the simulation directory: </p><pre class="fragment">python scripts/plotVorticity.py
</pre><p>Here is what we obtained:</p>
<div class="image">
<img src="cylinder2dRe550_GPU_dragcoefficient.png" alt="cylinder2dRe550_GPU_dragcoefficient.png"/>
<div class="caption">
cylinder2dRe550_GPU_dragcoefficient</div></div>
<div class="image">
<img src="cylinder2dRe550_GPU_vorticity.png" alt="cylinder2dRe550_GPU_vorticity.png"/>
<div class="caption">
cylinder2dRe550_GPU_vorticity</div></div>
<p> Next, you can create XDMF files for the field variables with the utility </p><pre class="fragment">petibm-createxdmf
</pre><p>It will create XDMF files for the pressure (<code>p.xmf</code>), the velocity components (<code>u.xmf</code> and <code>v.xmf</code>), and the vorticity (<code>wz.xmf</code>). These files can be open with VisIt to read, visualize, and process the field solutions.</p>
<h2>References</h2>
<ul>
<li>Ghia, U. K. N. G., Ghia, K. N., &amp; Shin, C. T. (1982). High-Re solutions for incompressible flow using the Navier-Stokes equations and a multigrid method. Journal of computational physics, 48(3), 387-411.</li>
<li>Koumoutsakos, P., &amp; Leonard, A. (1995). High-resolution simulations of the flow around an impulsively started cylinder using vortex methods. Journal of Fluid Mechanics, 296, 1-38.</li>
<li>Taira, K., &amp; Colonius, T. (2007). The immersed boundary method: a projection approach. Journal of Computational Physics, 225(2), 2118-2137. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Dec 11 2019 16:43:05 for PetIBM by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
